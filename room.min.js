/*! Room v1.0.0 | (c) GreenerSoft | https://roomjs.fr | MIT License */
let e=Symbol.toPrimitive,t=Symbol(),r=Symbol(),n=new WeakMap,a=new WeakMap,o=new WeakMap,i=new Map,s=[],l=[0],c=0,d=document,f=Object,p=Reflect,u=f.getPrototypeOf,g=f.entries,v=Array.isArray,y=console.error,E=e=>null==e,m=e=>e instanceof f,w=e=>e instanceof Element,b=e=>"function"==typeof e,P=e=>e&&u(e)===f.prototype,M=e=>m(e)&&r in e,S=e=>e.flat(1/0),k=e=>e?e.replace(/_/g,"-"):e,L=e=>{return m(e)&&(v(e)||P(e)||!((t=e.constructor).toString().replace(/ |\n/g,"")=="function"+t.name+"(){[nativecode]}"));var t},W=e=>s.length>l[0]&&s[0].push(e),x=(e,t)=>{e.children&&([...e.children].forEach((e=>x(e,t))),n.has(e)&&(e.dispatchEvent(new Event(t)),!e.isConnected&&n.delete(e)&&e.remove()))},D=(e,...t)=>{try{return e(...t)}catch(t){y===e?console.error(t):D(y,t)}},A=e=>(s.unshift([]),[D(e),new Set(s.shift())]),N=(e,t,n)=>m(e)&&e[r]?N(e.value,t,n):!n&&b(e)?N(D(e,t),t):e,O=e=>{let t=a.get(e);t&&t.forEach(((e,t)=>i.set(t,e))),i.size&&(c=c||requestAnimationFrame((()=>{i.forEach(((e,t)=>e?F(!0,e,t):_(t))),i.clear(),c=0})))},C={get:(e,r,n)=>r===t?e:(W(e),p.get(e,r,n)),set:(e,t,r)=>(!f.is(e[t],r)&&(e[t]=z(r),O(e)),!0),defineProperty:(e,t,r)=>(O(e),p.defineProperty(e,t,r)),deleteProperty:(e,t)=>(O(e),p.deleteProperty(e,t)),ownKeys:e=>(W(e),p.ownKeys(e))},z=e=>(L(e)&&!e[t]&&(g(e).forEach((([t,r])=>e[t]=z(r))),e[t]=!0,e=new Proxy(e,C)),e),K=e=>{let r=e;return M(e)?r=e.value:L(e)&&e[t]&&(r=v(e)?[]:{},g(e[t]).forEach((([e,t])=>r[e]=K(t)))),r},j=(e,t,r,n)=>{let o;r.forEach((r=>(o=a.get(r))?e&&o.set(n,t):a.set(r,new Map([[n,t]]))))},q=function(e){let t=(n.get(this)||{})[e.type];t&&!1===D(t.bind(this),e)&&(e.preventDefault(),e.stopPropagation())},B=(e,t,r,n,a)=>t&&r.size&&j(!e||t!==a,a,r,n),F=(e,t,r)=>{let[a,o]=A((()=>N(r.v,t,r.h)));!(a=S([a])).length&&B(e,t,o,r,t),a.forEach((a=>B(e,t,o,r,r.a?((e,t,r,a)=>{if(a){t=t.toLowerCase().slice(2);let a=n.get(e);a&&(delete a[t],e.removeEventListener(t,q)),b(r)&&(a?a[t]=r:n.set(e,{[t]:r}),e.addEventListener(t,q))}else{let n=f.getOwnPropertyDescriptor(u(e),t);n&&n.set?n.set.bind(e)(r):e[(E(r)?"remove":"set")+"Attribute"](t,r)}return e})(t,r.a,a,r.h):((e,t,r)=>(E(t)?r&&e.remove():w(t)?r?e.replaceWith(t):e.append(t):r?(e.data!==t&&(e.data=t),t=e):e.append(t=new Text(t)),t))(t,a,e))))};const R=(t,...r)=>(w(t)&&S(r).forEach((r=>{P(r)&&!(e in r)?g(r).forEach((([e,r])=>F(!1,t,{v:r,a:k(e),h:e.toLowerCase().startsWith("on")}))):F(!1,t,{v:r})})),t),h=function(e,...t){return R(this&&("string"==typeof(r=this)||r instanceof String)?d.createElementNS(this,e):d.createElement(e),...t);var r},elements=e=>new Proxy(h,{get:(t,r)=>t.bind(e,k(r))}),T=t=>z(L(t)?t:{[r]:!0,[e](){return this.value},value:t}),getData=e=>K(N(e)),setData=(e,r)=>{e!==r&&(M(e)?e.value=M(r)?r.value:L(r)?e.value:r:L(e)&&L(r)&&!M(r)&&u(e)===u(r)&&(v(e)?e.length=0:f.keys(e[t]).forEach((t=>delete e[t])),f.assign(e,e[t]?r:K(r))))},_=(e,...r)=>{let[n,a]=A(e);return[...r].forEach((e=>e&&(e=e[t])&&a.add(e))),j(!0,null,a,e),n},G=e=>(l.unshift(s.length),e=N(e),l.shift(),e),onError=e=>b(e)&&(y=e),map=(e,t,r)=>(o.set(e,new WeakMap),_((()=>G((()=>{let n,a,i,s,l,c,d,f=o.get(e),p=()=>v(t)?Number(n):n,u=()=>(d=D(r,a,l=T(p()),t))&&f.set(d,[l,a]),y=e.children,E=g(t),m=0;for(;m<y.length;)i=y[m],(s=f.get(i))&&m<E.length?([n,a]=E[m++],[l,c]=s,c===a?l.value=p():(E.slice(m).find((e=>e[1]===c))?(d=[...y].slice(m).find((e=>(s=f.get(e))&&s[1]===a)),(d||u())&&e.insertBefore(d,i)):f.delete(i),m--)):i.remove();for(;m<E.length;)[n,a]=E[m++],u()&&e.append(d);return e}))),t));d.addEventListener("visibilitychange",(()=>x(d.body,d.hidden?"pagehide":"pageshow"))),new MutationObserver((e=>{e.forEach((e=>{[...e.addedNodes].forEach((e=>x(e,"mount"))),[...e.removedNodes].forEach((e=>x(e,"unmount")))}))})).observe(d.body,{childList:!0,subtree:!0});export{R as append,h,elements,T as createData,setData,getData,_ as createEffect,G as untrack,onError,map};export default{append:R,h,elements,createData:T,setData,getData,createEffect:_,untrack:G,onError,map};